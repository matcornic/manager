<div>
    <oui-header data-heading="{{:: 'pci_notebook_add_title' | translate }}">
        <oui-guide-menu data-text="{{:: 'pci_project_guides_header' | translate }}">
            <oui-guide-menu-item href="{{ $ctrl.guideUrl }}" data-external>
                <span data-translate="pci_project_guides_header_all_guides"></span>
            </oui-guide-menu-item>
        </oui-guide-menu>
    </oui-header>

    <p data-translate="pci_notebook_add_description"></p>
</div>

<!--Banner messages-->
<div class="mt-4" id="addMessages">
    <oui-message data-type="info">
        <span data-translate="pci_notebook_add_banner_object_storage_description"></span>
        <a
            data-ui-sref="pci.projects.project.storages"
            target="_blank"
        >
            <span
                data-translate="pci_notebook_add_banner_object_storage_description_link"
            ></span>
        </a>
    </oui-message>

    <cui-message-container
        data-messages="$ctrl.messages"
    ></cui-message-container>
</div>

<!--Notebook stepper-->
<oui-stepper data-on-finish="$ctrl.onNotebookSubmit()">

    <!--Notebook Configuration-->
    <oui-step-form
        name="notebook_settings"
        data-header="{{:: 'pci_notebook_add_configuration_title' | translate }}"
        data-on-focus="$ctrl.displayNotebookConfiguration = true"
        data-on-submit="$ctrl.displayNotebookConfiguration = false"
        data-prevent-next="true"
    >
        <notebook-configuration
            data-display-notebook-configuration="$ctrl.displayNotebookConfiguration"
            data-notebook-model="$ctrl.notebookModel"
            data-editors="$ctrl.editors"></notebook-configuration>
    </oui-step-form>

    <!--Notebook Framework-->
    <oui-step-form
        data-name="notebook_framework"
        data-header="{{:: 'pci_notebook_add_framework_title' | translate }}"
        data-on-focus="$ctrl.displayNotebookFramework = true"
        data-on-submit="$ctrl.displayNotebookFramework = false"
        data-navigation="$ctrl.notebookModel.selected.framework.model"
    >
        <notebook-frameworks-list
            data-display-notebook-framework="$ctrl.displayNotebookFramework"
            data-notebook-model="$ctrl.notebookModel"
            data-frameworks="$ctrl.frameworks"></notebook-frameworks-list>
    </oui-step-form>

    <!--Notebook Privacy Settings-->
    <oui-step-form
        name="notebook_private_settings"
        data-header="{{:: 'pci_notebook_add_privacy_settings_title' | translate }}"
        data-on-focus="$ctrl.displayNotebookPrivacySettings = true"
        data-on-submit="$ctrl.displayNotebookPrivacySettings = false"
        data-navigation="$ctrl.notebookModel.selected.privacy"
    >
        <notebook-privacy-settings
            data-display-notebook-privacy-settings="$ctrl.displayNotebookPrivacySettings"
            data-notebook-model="$ctrl.notebookModel"></notebook-privacy-settings>
    </oui-step-form>

    <!--Notebook Datacenter Location-->
    <oui-step-form
        name="notebook_datacenter_location"
        data-header="{{:: 'pci_notebook_add_privacy_datacenter_location_title' | translate }}"
        data-on-focus="$ctrl.displayNotebookDatacenterLocation = true"
        data-on-submit="$ctrl.onLocationStepSubmit()"
        data-valid="$ctrl.flavorsAreLoaded"
        data-navigation="$ctrl.notebookModel.selected.region"
    >
        <p data-translate="pci_notebook_add_privacy_datacenter_location_description"></p>
        <pci-project-regions-list
            data-regions="$ctrl.regions"
            data-selected-region="$ctrl.notebookModel.selected.region"
            data-display-selected-region="$ctrl.displaySelectedRegion"
            data-on-change="$ctrl.onRegionChange(region)"
        ></pci-project-regions-list>
    </oui-step-form>

    <!--Notebook Resources-->
    <oui-step-form
        name="notebook_resources"
        data-header="{{:: 'pci_notebook_add_resources_title' | translate }}"
        data-on-focus="$ctrl.displayNotebookResources = true"
        data-on-submit="$ctrl.displayNotebookResources = false"
        data-navigation="$ctrl.notebookModel.selected.resource.usage && $ctrl.notebookModel.selected.resource.flavor"
    >
        <notebook-resources
            data-display-notebook-resources="$ctrl.displayNotebookResources"
            data-notebook-model="$ctrl.notebookModel"
            data-flavors="$ctrl.flavors"
            data-prices="$ctrl.prices"></notebook-resources>
    </oui-step-form>

    <!--Notebook Attach Container and Repository-->
    <oui-step-form
        name="notebook_attach"
        data-header="{{:: 'pci_notebook_add_attach_title' | translate }}"
        data-on-focus="$ctrl.displayNotebookAttach = true"
        data-on-submit="$ctrl.displayNotebookAttach = false"
        data-prevent-next="true"
    >
        <notebook-attach
            data-display-notebook-attach="$ctrl.displayNotebookAttach"
            data-notebook-model="$ctrl.notebookModel"
            data-volumes="$ctrl.volumes"></notebook-attach>
    </oui-step-form>

    <!--Notebook Review-->
    <oui-step-form
        name="notebook_attach"
        data-header="{{:: 'pci_notebook_add_review_title' | translate }}"
        data-on-focus="$ctrl.displayNotebookReview = true"
        data-on-submit="$ctrl.displayNotebookReview = false"
        data-editable="!$ctrl.isAdding"
    >
        <notebook-review
            data-display-notebook-review="$ctrl.displayNotebookReview"
            data-notebook-model="$ctrl.notebookModel"></notebook-review>
    </oui-step-form>

</oui-stepper>
